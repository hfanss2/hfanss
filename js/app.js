var customSearch;!function(e){"use strict";function t(t,a){a=a||90;const o=t.href?e(t.getAttribute("href")):e(t);e("html, body").animate({scrollTop:o.offset().top-a},400)}e((function(){var a;!function(){if(!window.subData)return;const t=e("header .wrapper");e(".s-comment",t),e(".s-toc",t),e(".s-top",t),t.find(".nav-sub .logo").text(window.subData.title);let a=document.body.scrollTop;e(document,window).scroll((()=>{const o=e(window).scrollTop(),n=o-a;window.location.href.indexOf("/article/")>=0&&(n>=50&&o>100?(a=o,t.addClass("sub")):n<=-50&&(a=o,t.removeClass("sub")))}))}(),function(){var t=e("header .menu"),a=t.find(".underline");function o(e,o){e=e||t.find("li a.active"),(o=void 0===o||!!o)||a.addClass("disable-trans"),e&&e.length?(e.addClass("active").siblings().removeClass("active"),a.css({left:e.position().left,width:e.innerWidth()})):a.css({left:0,width:0}),o||setTimeout((function(){a.removeClass("disable-trans")}),0)}t.on("mouseenter","li",(function(t){o(e(t.currentTarget))})),t.on("mouseout",(function(){o()}));var n=null;if("/"===location.pathname||location.pathname.startsWith("/page/"))n=e(".nav-home",t);else{var i=location.pathname.match(/\/(.*?)\//);i.length>1&&(n=e(".nav-"+i[1],t))}o(n,!1)}(),(a=e(".l_header .switcher .s-menu")).click((function(t){t.stopPropagation(),e("body").toggleClass("z_menu-open"),a.toggleClass("active")})),e(document).click((function(t){e("body").removeClass("z_menu-open"),a.removeClass("active")})),function(){var t=e(".l_header .switcher .s-search"),a=e(".l_header"),o=e(".l_header .m_search");0!==t.length&&(t.click((function(e){e.stopPropagation(),a.toggleClass("z_search-open"),o.find("input").focus()})),e(document).click((function(e){a.removeClass("z_search-open")})),o.click((function(e){e.stopPropagation()})))}(),function(){const a=e(".toc-wrapper");if(0===a.length)return;e(document).click((()=>a.removeClass("active"))),a.on("click","a",(e=>{e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName?t(e.target):"SPAN"===e.target.tagName&&t(e.target.parentElement),a.removeClass("active")}));const o=Array.from(a.find("li a")),n=()=>o.map((t=>Math.floor(e(t.getAttribute("href")).offset().top-90)));let i=n();const s=()=>{const t=e("html").scrollTop()||e("body").scrollTop();if(!i)return;let a,n=0,s=i.length-1;for(;n<s;)a=n+s+1>>1,i[a]===t?n=s=a:i[a]<t?n=a:s=a-1;e(o).removeClass("active").eq(n).addClass("active")};e(window).resize((()=>{i=n(),s()})).scroll((()=>{s()})),s()}(),"google"===SEARCH_SERVICE?customSearch=new GoogleCustomSearch({apiKey:GOOGLE_CUSTOM_SEARCH_API_KEY,engineId:GOOGLE_CUSTOM_SEARCH_ENGINE_ID,imagePath:"/images/"}):"algolia"===SEARCH_SERVICE?customSearch=new AlgoliaSearch({apiKey:ALGOLIA_API_KEY,appId:ALGOLIA_APP_ID,indexName:ALGOLIA_INDEX_NAME,imagePath:"/images/"}):"hexo"===SEARCH_SERVICE?customSearch=new HexoSearch({imagePath:"/images/"}):"azure"===SEARCH_SERVICE?customSearch=new AzureSearch({serviceName:AZURE_SERVICE_NAME,indexName:AZURE_INDEX_NAME,queryKey:AZURE_QUERY_KEY,imagePath:"/images/"}):"baidu"===SEARCH_SERVICE&&(customSearch=new BaiduSearch({apiId:BAIDU_API_ID,imagePath:"/images/"}))}))}(jQuery),document.onkeydown=function(e){var t,a,o=!!document.all;o?(t=window.event.keyCode,a=window.event):(t=e.which,a=e),9==t&&(o?(a.keyCode=0,a.returnValue=!1):(a.which=0,a.preventDefault()))};